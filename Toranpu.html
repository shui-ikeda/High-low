<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIGH & LOWゲーム</title>
    <link rel="stylesheet" href="Toranpu.css"> 
</head>
<body>
    <h1>High & Low ゲーム</h1>
    <p id="current-card-text">ディーラーのカード:</p> <!-- ディーラーのカードのテキスト表示 -->
    <img id="current-card-img" src="" alt="ディーラーのカード" style="width:90px;"> <!-- ディーラーのカードの画像 -->
    <img src="Dekki.png" style="height: 90px; margin-left: 1%;"> <!-- デッキの画像 -->
    <br>
    <div>
        <button id="high-button">High</button> <!-- Highボタン -->
        <button id="low-button">Low</button> <!-- Lowボタン -->
    </div>
    <p id="result"></p> <!-- 結果を表示するためのテキスト -->
    <img id="next-card-img" src="" alt="あなたのカード" style="width:90px;"> <!-- プレイヤーのカードの画像 -->
    <br>
    <img src="Dekki.png" style="height: 90px; margin-left: 1%;"> <!-- デッキの画像 -->

    <script>
        let deckId; // カード
        let CountGame; // ゲーム数
        let GameActive = true; // ゲームの進行状況
        let NowCard; // 現在ののカード

        // 新規のゲーム
        function NewGame(){
            fetch('https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1')
            // ↑ 「fetch」で外部のURLからの情報を取得
            .then(response => 
                response.json()) // json形式で保存
            .then(data => {
                deckId = data.deckId; // デッキのIDを保存
                drawCard(); // カードを引く(関数)
            })
        }

        // カードを引く関数
        function drawCard(){
            fetch('https://deckofcardsapi.com/api/deck/${deck_id}/draw/?count=1')
            .then(responce => 
                responce.json())
            .then(data => {
                currentCard = data.cards[0];
                document.getElementById("current-card-text").textContent
                    = 'ディーラーのカード：${currentCard.value} of ${currentCard.suit}'; // カードのテキストを更新
                document.getElementById('current-card-img').src = currentCard.image; // カードの画像を更新
            
            });
        }

        // カードを数値に変換する関数
        function CardValue(value){
            switch(value) {
                case "ACE":
                    return 14; // "A"は14
                case "KING":
                    return 13; // "K"は13
                case "QUEEN":
                    return 12; // "Q"は12
                case "JACK":
                    return 11; // "J"は11
                default:
                    return parseInt(value); // "2~10"はそのまま使う
            }
        }
        
        // プレイヤーの選択に基づいてカードを引く
        function guessCard(PlayerChoice) {

            /* ゲームがアクティブ状態であれば処理するが、
            アクティブでないときは何も処理を行わない*/
            if(GameActive == false){
                return;
            }
            fetch(`https://deckofcardsapi.com/api/deck/${deckId}/draw/?count=1`)
            .then(responce => 
                responce.json())

        }
        
        // 新規のゲームを実行する関数を呼び出す
        NewGame();
    </script>
</body>
</html>
